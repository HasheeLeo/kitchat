{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"react-native-gifted-chat","data":{"isAsync":false}},{"name":"@react-native-community/async-storage","data":{"isAsync":false}},{"name":"react-native-fs","data":{"isAsync":false}},{"name":"../helpers/base64ToType","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/regenerator\"));\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/createClass\"));\n\n  var _reactNativeGiftedChat = _$$_REQUIRE(_dependencyMap[4], \"react-native-gifted-chat\");\n\n  var _asyncStorage = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"@react-native-community/async-storage\"));\n\n  var _reactNativeFs = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[6], \"react-native-fs\"));\n\n  var _base64ToType = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[7], \"../helpers/base64ToType\"));\n\n  var LocalStorage = function () {\n    function LocalStorage() {\n      (0, _classCallCheck2.default)(this, LocalStorage);\n    }\n\n    (0, _createClass2.default)(LocalStorage, null, [{\n      key: \"loadMessagesImages\",\n      value: function loadMessagesImages(messages) {\n        messages.forEach(function (message) {\n          if (message.attachmentPath && !message.documentName) message.image = \"file://\" + message.attachmentPath;\n        });\n      }\n    }, {\n      key: \"loadConversations\",\n      value: function loadConversations() {\n        var conversations;\n        return _regenerator.default.async(function loadConversations$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return _regenerator.default.awrap(_asyncStorage.default.getItem('conversations'));\n\n              case 3:\n                conversations = _context.sent;\n\n                if (!conversations) {\n                  _context.next = 8;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", JSON.parse(conversations));\n\n              case 8:\n                return _context.abrupt(\"return\", null);\n\n              case 9:\n                _context.next = 14;\n                break;\n\n              case 11:\n                _context.prev = 11;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, [[0, 11]]);\n      }\n    }, {\n      key: \"loadDeviceToken\",\n      value: function loadDeviceToken() {\n        var token;\n        return _regenerator.default.async(function loadDeviceToken$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return _regenerator.default.awrap(_asyncStorage.default.getItem('deviceToken'));\n\n              case 3:\n                token = _context2.sent;\n\n                if (!token) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", token);\n\n              case 8:\n                return _context2.abrupt(\"return\", null);\n\n              case 9:\n                _context2.next = 14;\n                break;\n\n              case 11:\n                _context2.prev = 11;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 14:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, [[0, 11]]);\n      }\n    }, {\n      key: \"loadMessages\",\n      value: function loadMessages(conversationId) {\n        var messages;\n        return _regenerator.default.async(function loadMessages$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return _regenerator.default.awrap(_asyncStorage.default.getItem('messages'));\n\n              case 3:\n                messages = _context3.sent;\n\n                if (!messages) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                messages = JSON.parse(messages);\n\n                if (!messages[conversationId]) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                messages = messages[conversationId];\n                LocalStorage.loadMessagesImages(messages);\n                return _context3.abrupt(\"return\", messages);\n\n              case 10:\n                return _context3.abrupt(\"return\", []);\n\n              case 13:\n                _context3.prev = 13;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(_context3.t0);\n\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, null, null, [[0, 13]]);\n      }\n    }, {\n      key: \"loadSession\",\n      value: function loadSession() {\n        var session;\n        return _regenerator.default.async(function loadSession$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return _regenerator.default.awrap(_asyncStorage.default.getItem('session'));\n\n              case 3:\n                session = _context4.sent;\n                if (session) session = JSON.parse(session);\n                return _context4.abrupt(\"return\", session);\n\n              case 8:\n                _context4.prev = 8;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.log(_context4.t0);\n\n              case 11:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, null, null, [[0, 8]]);\n      }\n    }, {\n      key: \"saveConversations\",\n      value: function saveConversations(conversations) {\n        return _regenerator.default.async(function saveConversations$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return _regenerator.default.awrap(_asyncStorage.default.setItem('conversations', JSON.stringify(conversations)));\n\n              case 3:\n                _context5.next = 8;\n                break;\n\n              case 5:\n                _context5.prev = 5;\n                _context5.t0 = _context5[\"catch\"](0);\n                console.log(_context5.t0);\n\n              case 8:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, null, null, [[0, 5]]);\n      }\n    }, {\n      key: \"saveDeviceToken\",\n      value: function saveDeviceToken(token) {\n        return _regenerator.default.async(function saveDeviceToken$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                _context6.next = 3;\n                return _regenerator.default.awrap(_asyncStorage.default.setItem('deviceToken', token));\n\n              case 3:\n                _context6.next = 8;\n                break;\n\n              case 5:\n                _context6.prev = 5;\n                _context6.t0 = _context6[\"catch\"](0);\n                console.log(_context6.t0);\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, null, null, [[0, 5]]);\n      }\n    }, {\n      key: \"saveFile\",\n      value: function saveFile(id, file) {\n        var typeData, path;\n        return _regenerator.default.async(function saveFile$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                typeData = (0, _base64ToType.default)(file);\n\n                if (!typeData) {\n                  _context7.next = 7;\n                  break;\n                }\n\n                path = _reactNativeFs.default.DocumentDirectoryPath + \"/\" + id;\n                if (typeData.ext) path = path + \".\" + typeData.ext;\n                _context7.next = 7;\n                return _regenerator.default.awrap(_reactNativeFs.default.writeFile(path, file, 'base64'));\n\n              case 7:\n                _context7.next = 12;\n                break;\n\n              case 9:\n                _context7.prev = 9;\n                _context7.t0 = _context7[\"catch\"](0);\n                console.log(_context7.t0);\n\n              case 12:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, null, null, [[0, 9]]);\n      }\n    }, {\n      key: \"saveMessage\",\n      value: function saveMessage(conversationId, message) {\n        var savedMessages;\n        return _regenerator.default.async(function saveMessage$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                _context8.next = 3;\n                return _regenerator.default.awrap(_asyncStorage.default.getItem('messages'));\n\n              case 3:\n                savedMessages = _context8.sent;\n                if (savedMessages) savedMessages = JSON.parse(savedMessages);else savedMessages = {};\n                savedMessages[conversationId] = _reactNativeGiftedChat.GiftedChat.append(savedMessages[conversationId], message);\n                _context8.next = 8;\n                return _regenerator.default.awrap(_asyncStorage.default.setItem('messages', JSON.stringify(savedMessages)));\n\n              case 8:\n                _context8.next = 13;\n                break;\n\n              case 10:\n                _context8.prev = 10;\n                _context8.t0 = _context8[\"catch\"](0);\n                console.log(_context8.t0);\n\n              case 13:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, null, null, [[0, 10]]);\n      }\n    }, {\n      key: \"saveSession\",\n      value: function saveSession(email, password) {\n        var session;\n        return _regenerator.default.async(function saveSession$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                session = {\n                  email: email,\n                  password: password\n                };\n                _context9.next = 4;\n                return _regenerator.default.awrap(_asyncStorage.default.setItem('session', JSON.stringify(session)));\n\n              case 4:\n                _context9.next = 9;\n                break;\n\n              case 6:\n                _context9.prev = 6;\n                _context9.t0 = _context9[\"catch\"](0);\n                console.log(_context9.t0);\n\n              case 9:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, null, null, [[0, 6]]);\n      }\n    }]);\n    return LocalStorage;\n  }();\n\n  ;\n  var _default = LocalStorage;\n  exports.default = _default;\n});","lineCount":357,"map":[[15,0,3,0],[17,0,5,0],[19,0,6,0],[21,0,8,0],[23,6,11,6,"LocalStorage"],[23,18],[30,41,13,28,"messages"],[30,49],[30,51,13,62],[31,0,14,4,"messages"],[31,8,14,4,"messages"],[31,16,14,12],[31,17,14,13,"forEach"],[31,24,14,4],[31,25,14,21],[31,35,14,21,"message"],[31,42,14,28],[31,44,14,32],[32,0,15,6],[32,14,15,10,"message"],[32,21,15,17],[32,22,15,18,"attachmentPath"],[32,36,15,10],[32,40,15,36],[32,41,15,37,"message"],[32,48,15,44],[32,49,15,45,"documentName"],[32,61,15,6],[32,63,16,8,"message"],[32,70,16,15],[32,71,16,16,"image"],[32,76,16,8],[32,91,16,34,"message"],[32,98,16,41],[32,99,16,42,"attachmentPath"],[32,113,16,8],[33,0,17,5],[33,9,14,4],[34,0,18,3],[45,50,22,34,"AsyncStorage"],[45,72,22,47,"getItem"],[45,79,22,34],[45,80,22,55],[45,95,22,34],[45,96],[48,0,22,12,"conversations"],[48,16,22,12,"conversations"],[48,29],[50,21,23,10,"conversations"],[50,34],[55,49,24,15,"JSON"],[55,53,24,19],[55,54,24,20,"parse"],[55,59,24,15],[55,60,24,26,"conversations"],[55,73,24,15],[55,74],[58,49,26,15],[58,53],[67,0,29,6,"console"],[67,16,29,6,"console"],[67,23,29,13],[67,24,29,14,"log"],[67,27,29,6],[86,50,35,26,"AsyncStorage"],[86,72,35,39,"getItem"],[86,79,35,26],[86,80,35,47],[86,93,35,26],[86,94],[89,0,35,12,"token"],[89,16,35,12,"token"],[89,21],[91,21,36,10,"token"],[91,26],[96,50,37,15,"token"],[96,55],[99,50,39,15],[99,54],[108,0,42,6,"console"],[108,16,42,6,"console"],[108,23,42,13],[108,24,42,14,"log"],[108,27,42,6],[119,35,46,28,"conversationId"],[119,49],[127,50,48,27,"AsyncStorage"],[127,72,48,40,"getItem"],[127,79,48,27],[127,80,48,48],[127,90,48,27],[127,91],[130,0,48,10,"messages"],[130,16,48,10,"messages"],[130,24],[132,21,49,10,"messages"],[132,29],[137,0,50,8,"messages"],[137,16,50,8,"messages"],[137,24,50,16],[137,27,50,19,"JSON"],[137,31,50,23],[137,32,50,24,"parse"],[137,37,50,19],[137,38,50,30,"messages"],[137,46,50,19],[137,47,50,8],[139,21,51,12,"messages"],[139,29,51,20],[139,30,51,21,"conversationId"],[139,44,51,20],[139,45],[144,0,52,10,"messages"],[144,16,52,10,"messages"],[144,24,52,18],[144,27,52,21,"messages"],[144,35,52,29],[144,36,52,30,"conversationId"],[144,50,52,29],[144,51,52,10],[145,0,53,10,"LocalStorage"],[145,16,53,10,"LocalStorage"],[145,28,53,22],[145,29,53,23,"loadMessagesImages"],[145,47,53,10],[145,48,53,42,"messages"],[145,56,53,10],[146,50,54,17,"messages"],[146,58],[149,50,57,13],[149,52],[154,0,60,6,"console"],[154,16,60,6,"console"],[154,23,60,13],[154,24,60,14,"log"],[154,27,60,6],[173,50,66,26,"AsyncStorage"],[173,72,66,39,"getItem"],[173,79,66,26],[173,80,66,47],[173,89,66,26],[173,90],[176,0,66,10,"session"],[176,16,66,10,"session"],[176,23],[177,0,67,6],[177,20,67,10,"session"],[177,27,67,6],[177,29,68,8,"session"],[177,36,68,15],[177,39,68,18,"JSON"],[177,43,68,22],[177,44,68,23,"parse"],[177,49,68,18],[177,50,68,29,"session"],[177,57,68,18],[177,58,68,8],[178,50,70,13,"session"],[178,57],[183,0,73,6,"console"],[183,16,73,6,"console"],[183,23,73,13],[183,24,73,14,"log"],[183,27,73,6],[194,40,77,33,"conversations"],[194,53],[201,50,79,12,"AsyncStorage"],[201,72,79,25,"setItem"],[201,79,79,12],[201,80,79,33],[201,95,79,12],[201,97,80,8,"JSON"],[201,101,80,12],[201,102,80,13,"stringify"],[201,111,80,8],[201,112,80,23,"conversations"],[201,125,80,8],[201,126,79,12],[201,127],[210,0,84,6,"console"],[210,16,84,6,"console"],[210,23,84,13],[210,24,84,14,"log"],[210,27,84,6],[221,38,88,31,"token"],[221,43],[228,50,90,12,"AsyncStorage"],[228,72,90,25,"setItem"],[228,79,90,12],[228,80,90,33],[228,93,90,12],[228,95,90,48,"token"],[228,100,90,12],[228,101],[237,0,93,6,"console"],[237,16,93,6,"console"],[237,23,93,13],[237,24,93,14,"log"],[237,27,93,6],[248,31,97,24,"id"],[248,33],[248,35,97,36,"file"],[248,39],[255,0,99,12,"typeData"],[255,16,99,12,"typeData"],[255,24],[255,27,99,23],[255,54,99,36,"file"],[255,58,99,23],[255,59],[257,21,100,10,"typeData"],[257,29],[262,0,101,12,"path"],[262,16,101,12,"path"],[262,20],[262,23,101,22,"RNFS"],[262,46,101,27,"DocumentDirectoryPath"],[262,67],[262,76,101,52,"id"],[262,78],[263,0,102,8],[263,20,102,12,"typeData"],[263,28,102,20],[263,29,102,21,"ext"],[263,32,102,8],[263,34,103,10,"path"],[263,38,103,14],[263,41,103,20,"path"],[263,45,103,14],[263,54,103,28,"typeData"],[263,62,103,36],[263,63,103,37,"ext"],[263,66,103,10],[265,50,105,14,"RNFS"],[265,73,105,19,"writeFile"],[265,82,105,14],[265,83,105,29,"path"],[265,87,105,14],[265,89,105,35,"file"],[265,93,105,14],[265,95,105,41],[265,103,105,14],[265,104],[274,0,109,6,"console"],[274,16,109,6,"console"],[274,23,109,13],[274,24,109,14,"log"],[274,27,109,6],[285,34,113,27,"conversationId"],[285,48],[285,50,114,4,"message"],[285,57],[293,50,117,32,"AsyncStorage"],[293,72,117,45,"getItem"],[293,79,117,32],[293,80,117,53],[293,90,117,32],[293,91],[296,0,117,10,"savedMessages"],[296,16,117,10,"savedMessages"],[296,29],[297,0,118,6],[297,20,118,10,"savedMessages"],[297,33,118,6],[297,35,119,8,"savedMessages"],[297,48,119,21],[297,51,119,24,"JSON"],[297,55,119,28],[297,56,119,29,"parse"],[297,61,119,24],[297,62,119,35,"savedMessages"],[297,75,119,24],[297,76,119,8],[297,77,118,6],[297,82,121,8,"savedMessages"],[297,95,121,21],[297,98,121,24],[297,100,121,8],[298,0,123,6,"savedMessages"],[298,16,123,6,"savedMessages"],[298,29,123,19],[298,30,123,20,"conversationId"],[298,44,123,19],[298,45,123,6],[298,48,123,38,"GiftedChat"],[298,82,123,49,"append"],[298,88,123,38],[298,89,124,8,"savedMessages"],[298,102,124,21],[298,103,124,22,"conversationId"],[298,117,124,21],[298,118,123,38],[298,120,125,8,"message"],[298,127,123,38],[298,128,123,6],[300,50,127,12,"AsyncStorage"],[300,72,127,25,"setItem"],[300,79,127,12],[300,80,127,33],[300,90,127,12],[300,92,127,45,"JSON"],[300,96,127,49],[300,97,127,50,"stringify"],[300,106,127,45],[300,107,127,60,"savedMessages"],[300,120,127,45],[300,121,127,12],[300,122],[309,0,130,6,"console"],[309,16,130,6,"console"],[309,23,130,13],[309,24,130,14,"log"],[309,27,130,6],[320,34,134,27,"email"],[320,39],[320,41,134,42,"password"],[320,49],[327,0,136,12,"session"],[327,16,136,12,"session"],[327,23],[327,26,136,22],[328,0,136,23,"email"],[328,18,136,23,"email"],[328,23,136,28],[328,25,136,23,"email"],[328,30,136,22],[329,0,136,30,"password"],[329,18,136,30,"password"],[329,26,136,38],[329,28,136,30,"password"],[330,0,136,22],[330,17],[332,50,137,12,"AsyncStorage"],[332,72,137,25,"setItem"],[332,79,137,12],[332,80,137,33],[332,89,137,12],[332,91,137,44,"JSON"],[332,95,137,48],[332,96,137,49,"stringify"],[332,105,137,44],[332,106,137,59,"session"],[332,113,137,44],[332,114,137,12],[332,115],[341,0,140,6,"console"],[341,16,140,6,"console"],[341,23,140,13],[341,24,140,14,"log"],[341,27,140,6],[354,0,143,1],[355,17,145,15,"LocalStorage"],[355,29]],"functionMap":{"names":["<global>","LocalStorage","loadMessagesImages","messages.forEach$argument_0","loadConversations","loadDeviceToken","loadMessages","loadSession","saveConversations","saveDeviceToken","saveFile","saveMessage","saveSession"],"mappings":"AAA;ACU;ECE;qBCC;KDG;GDC;EGE;GHW;EIE;GJW;EKE;GLgB;EME;GNW;EOE;GPS;EQE;GRO;ESE;GTc;EUE;GVmB;EWE;GXQ;CDC"}},"type":"js/module"}]}